import{jsx as i,jsxs as e,Fragment as r}from"react/jsx-runtime";import t,{useCallback as s}from"react";import{translate as o,humanFileSize as l}from"@aws-amplify/ui";import"../../../../primitives/Alert/Alert.js";import"../../../../primitives/Autocomplete/Autocomplete.js";import"../../../../primitives/Badge/Badge.js";import{Button as m}from"../../../../primitives/Button/Button.js";import"../../../../primitives/ButtonGroup/ButtonGroup.js";import"../../../../primitives/Card/Card.js";import"../../../../primitives/CheckboxField/CheckboxField.js";import"../../../../primitives/Collection/Collection.js";import"../../../../primitives/Divider/Divider.js";import"../../../../primitives/Expander/Expander.js";import"../../../../primitives/Expander/ExpanderItem.js";import"../../../../primitives/FieldGroupIcon/FieldGroupIcon.js";import"../../../../primitives/FieldGroupIcon/FieldGroupIconButton.js";import"../../../../primitives/Flex/Flex.js";import"../../../../primitives/Grid/Grid.js";import"../../../../primitives/Heading/Heading.js";import"../../../../primitives/HighlightMatch/HighlightMatch.js";import"../../../../primitives/Icon/Icon.js";import{Image as a}from"../../../../primitives/Image/Image.js";import"../../../../primitives/Link/Link.js";import{Loader as n}from"../../../../primitives/Loader/Loader.js";import"../../../../primitives/Menu/Menu.js";import"../../../../primitives/Menu/MenuButton.js";import"../../../../primitives/Menu/MenuItem.js";import"../../../../primitives/Pagination/Pagination.js";import"../../../../primitives/PasswordField/PasswordField.js";import"../../../../primitives/PhoneNumberField/PhoneNumberField.js";import"../../../../primitives/Placeholder/Placeholder.js";import"../../../../primitives/Radio/Radio.js";import"../../../../primitives/RadioGroupField/RadioGroupField.js";import"../../../../primitives/Rating/Rating.js";import"../../../../primitives/ScrollView/ScrollView.js";import"../../../../primitives/SearchField/SearchField.js";import"../../../../primitives/SelectField/SelectField.js";import"../../../../primitives/SliderField/SliderField.js";import"../../../../primitives/StepperField/StepperField.js";import"../../../../primitives/SwitchField/SwitchField.js";import"../../../../primitives/Table/Table.js";import"../../../../primitives/Table/TableBody.js";import"../../../../primitives/Table/TableCell.js";import"../../../../primitives/Table/TableFoot.js";import"../../../../primitives/Table/TableHead.js";import"../../../../primitives/Table/TableRow.js";import"../../../../primitives/Tabs/Tabs.js";import{Text as p}from"../../../../primitives/Text/Text.js";import"../../../../primitives/TextAreaField/TextAreaField.js";import{TextField as d}from"../../../../primitives/TextField/TextField.js";import"../../../../primitives/ToggleButton/ToggleButton.js";import"../../../../primitives/ToggleButtonGroup/ToggleButtonGroup.js";import{View as c}from"../../../../primitives/View/View.js";import{VisuallyHidden as j}from"../../../../primitives/VisuallyHidden/VisuallyHidden.js";import{ComponentClassNames as u}from"../../../../primitives/shared/constants.js";import"tslib";import"classnames";import{IconClose as v}from"../../../../primitives/Icon/icons/IconClose.js";import{IconEdit as g}from"../../../../primitives/Icon/icons/IconEdit.js";import{IconFile as F}from"../../../../primitives/Icon/icons/IconFile.js";import{UploadMessage as h}from"./UploadMessage.js";function b({errorMessage:b,file:f,fileState:T,hasImage:S,name:x,onCancel:I,onCancelEdit:C,onPause:O,onResume:R,onSaveEdit:k,onStartEdit:w,percentage:B,isResumable:G,showImage:M}){const[z,E]=t.useState(x),N=t.useRef(null),P=URL.createObjectURL(f);t.useEffect((()=>{"editing"===T&&N.current&&N.current.focus()}),[T]);const{size:U}=f,H=S?i(a,{alt:f.name,src:P}):i(F,{}),L=!G||B>0,A=null===T||"error"===T&&b===o("Extension not allowed"),V=s((()=>e(r,{children:[i(c,Object.assign({className:u.FileUploaderFileMain},{children:i(p,Object.assign({className:u.FileUploaderFileName},{children:x}))})),i(p,Object.assign({as:"span",className:u.FileUploaderFileSize},{children:l(U,!0)}))]})),[x,U]),y=s((()=>{switch(T){case"editing":return e(r,{children:[i(m,Object.assign({size:"small",variation:"primary",onClick:()=>{k(z)}},{children:"Save"})),i(m,Object.assign({size:"small",onClick:()=>{E(x),C()}},{children:"Cancel"}))]});case"resume":case"loading":return G?i(m,Object.assign({onClick:O,size:"small",variation:"link"},{children:o("pause")})):null;case"paused":return i(m,Object.assign({onClick:R,size:"small",variation:"link"},{children:o("Resume")}));case"success":return null;default:return e(r,{children:[A?e(m,Object.assign({onClick:w,size:"small",variation:"link"},{children:[e(j,{children:["Edit file name ",f.name]}),i(g,{"aria-hidden":!0,fontSize:"medium"})]})):null,e(m,Object.assign({size:"small",onClick:I},{children:[e(j,{children:["Remove file name ",f.name]}),i(v,{"aria-hidden":!0,fontSize:"medium"})]}))]})}}),[f.name,T,G,x,I,C,O,R,k,w,A,z]);return f?e(c,Object.assign({className:u.FileUploaderFile},{children:[e(c,Object.assign({className:u.FileUploaderFileWrapper},{children:[M?i(c,Object.assign({className:u.FileUploaderFileImage},{children:H})):null,"editing"===T?i(c,Object.assign({as:"form",flex:"1",onSubmit:()=>{k(z)}},{children:i(d,{maxLength:1024,ref:N,label:"file name",size:"small",variation:"quiet",labelHidden:!0,onChange:i=>{E(i.target.value)},value:z})})):i(V,{}),i(y,{}),"loading"===T?i(n,{className:u.FileUploaderLoader,variation:"linear",percentage:B,isDeterminate:L,isPercentageTextHidden:!0}):null]})),i(h,{fileState:T,errorMessage:b,percentage:B})]})):null}export{b as UploadTracker};
