import{__rest as e}from"tslib";import{jsx as t,jsxs as s}from"react/jsx-runtime";import*as a from"react";import o from"classnames";import{Flex as d}from"../Flex/Flex.js";import{ComponentClassNames as i}from"../shared/constants.js";import"../View/View.js";import{IconCheck as c}from"../Icon/icons/IconCheck.js";import{IconIndeterminate as r}from"../Icon/icons/IconIndeterminate.js";import{Input as n}from"../Input/Input.js";import{Text as l}from"../Text/Text.js";import{VisuallyHidden as m}from"../VisuallyHidden/VisuallyHidden.js";import{getTestId as b}from"../utils/getTestId.js";import{useStableId as h}from"../utils/useStableId.js";import{useCheckbox as u}from"./useCheckbox.js";import{splitPrimitiveProps as p}from"../utils/splitPrimitiveProps.js";import{classNameModifierByFlag as k}from"../shared/utils.js";const f=a.forwardRef(((f,C)=>{var{checked:x,className:I,defaultChecked:j,hasError:y,isDisabled:g,isIndeterminate:N,label:B,labelHidden:F,labelPosition:H,onChange:P,testId:V,inputStyles:v}=f,D=e(f,["checked","className","defaultChecked","hasError","isDisabled","isIndeterminate","label","labelHidden","labelPosition","onChange","testId","inputStyles"]);const{styleProps:E,rest:O}=p(D),S=void 0!==x?x:j,{dataChecked:w,dataFocus:T,onBlur:L,onChange:q,onFocus:M,setDataChecked:R}=u(S,P);a.useEffect((()=>{void 0!==x&&x!==w&&R(x)}),[x,w,R]);const $=h();a.useEffect((()=>{const e=document.querySelector(`[data-id="${$}"]`);e&&"boolean"==typeof N&&(e.indeterminate=N)}),[$,N]);const z=b(V,i.CheckboxButton),A=b(V,i.CheckboxIcon),G=b(V,i.CheckboxLabel),J=o(i.CheckboxButton,k(i.CheckboxButton,"disabled",g),k(i.CheckboxButton,"error",y),k(i.CheckboxButton,"focused",T)),K=o(i.CheckboxIcon,k(i.CheckboxIcon,"checked",w),k(i.CheckboxIcon,"disabled",g)),Q=a.useMemo((()=>N?t(r,{className:o(K,k(i.CheckboxIcon,"indeterminate",N)),"data-testid":A}):t(c,{className:K,"data-checked":w,"data-disabled":g,"data-testid":A})),[w,K,A,g,N]);return s(d,Object.assign({as:"label",className:o(i.Checkbox,k(i.Checkbox,"disabled",g),I),"data-disabled":g,"data-label-position":H,testId:V},E,{children:[t(m,{children:t(n,Object.assign({checked:x,className:i.CheckboxInput,"data-id":$,defaultChecked:j,isDisabled:g,onBlur:L,onChange:q,onFocus:M,ref:C,type:"checkbox"},O))}),B&&t(l,Object.assign({as:"span",className:o(i.CheckboxLabel,{[i.VisuallyHidden]:F}),"data-disabled":g,testId:G},{children:B})),t(d,Object.assign({"aria-hidden":"true",as:"span",className:J,"data-checked":w,"data-disabled":g,"data-focus":T,"data-error":y,testId:z},v,{children:Q}))]}))}));f.displayName="Checkbox";export{f as Checkbox};
