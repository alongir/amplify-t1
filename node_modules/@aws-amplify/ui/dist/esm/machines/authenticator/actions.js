import{__assign as r,__awaiter as e,__generator as t}from"tslib";import{Auth as n}from"aws-amplify";import{assign as o,stop as a}from"xstate/lib/actions";import"lodash/includes";import"../../types/authenticator/user.js";import"../../types/authenticator/attributes.js";import"../../types/primitives/componentClassName.js";import"../../i18n/translations.js";import{trimValues as u}from"../../helpers/authenticator/utils.js";import"lodash/cloneDeep";import"../../helpers/accountSettings/utils.js";var i=function(r){return a(r)},s=o({attributeToVerify:function(r){}}),c=o({challengeName:function(r){}}),l=o({requiredAttributes:function(r){}}),m=o({remoteError:function(r){return""}}),d=o({formValues:function(r){return{}}}),f=o({touched:function(r){return{}}}),v=o({unverifiedContactMethods:function(r){}}),p=o({username:function(r){}}),h=o({validationError:function(r){return{}}}),V=o({challengeName:function(r,e){var t;return null===(t=e.data)||void 0===t?void 0:t.challengeName}}),b=o({requiredAttributes:function(r,e){var t,n;return null===(n=null===(t=e.data)||void 0===t?void 0:t.challengeParam)||void 0===n?void 0:n.requiredAttributes}}),g=o({redirectIntent:function(r){return"confirmPasswordReset"}}),y=o({redirectIntent:function(r){return"confirmSignUp"}}),_=o({authAttributes:function(r,e){var t,n,o=r.loginMechanisms[0];return{username:null!==(t=r.formValues[o])&&void 0!==t?t:r.formValues.username,password:null===(n=r.formValues)||void 0===n?void 0:n.password}}}),w=o({validationError:function(r,e){return e.data}}),j=o({remoteError:function(r,e){var t;return"NoUserPoolError"===e.data.name?"Configuration error (see console) â€“ please contact the administrator":(null===(t=e.data)||void 0===t?void 0:t.message)||e.data}}),A=o({unverifiedContactMethods:function(r,e){return e.data.unverified}}),D=o({user:function(r,e){return e.data.user||e.data}}),E=o({username:function(r,e){var t=r.formValues,n=t.username,o=t.country_code;return o&&(n="".concat(o).concat(n)),n}}),N=o({codeDeliveryDetails:function(r,e){return e.data.codeDeliveryDetails}}),C=o({authAttributes:function(r,e){return{username:r.formValues.username}}}),M=o({formValues:function(e,t){var n,o=t.data,a=o.name,u=o.value;return r(r({},e.formValues),((n={})[a]=u,n))}}),P=o({formValues:function(e,t){var n=r(r({},e.formValues),t.data);return u(n,"password")}}),q=o({touched:function(e,t){var n,o=t.data.name;return r(r({},e.touched),((n={})["".concat(o)]=!0,n))}}),x=function(r){return e(void 0,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return e=r.username,[4,n.forgotPassword(e)];case 1:return[2,t.sent()]}}))}))},I=o({formValues:function(e,t){var n,o,a=e.loginMechanisms[0],u=void 0===a?"username":a;if(!e.formValues.phone_number&&"phone_number"!==u)return e.formValues;var i=e.formValues,s=e.country_code,c=i.phone_number?"phone_number":"username",l="".concat(null!==(o=i.country_code)&&void 0!==o?o:s).concat(i[c]).replace(/[^A-Z0-9+]/gi,""),m=r(r({},i),((n={})[c]=l,n));return delete m.country_code,m}});export{s as clearAttributeToVerify,c as clearChallengeName,m as clearError,d as clearFormValues,l as clearRequiredAttributes,f as clearTouched,v as clearUnverifiedContactMethods,p as clearUsername,h as clearValidationError,q as handleBlur,M as handleInput,P as handleSubmit,I as parsePhoneNumber,x as resendCode,V as setChallengeName,N as setCodeDeliveryDetails,g as setConfirmResetPasswordIntent,y as setConfirmSignUpIntent,_ as setCredentials,w as setFieldErrors,j as setRemoteError,b as setRequiredAttributes,A as setUnverifiedContactMethods,D as setUser,E as setUsername,C as setUsernameAuthAttributes,i as stopActor};
